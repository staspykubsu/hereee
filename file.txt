admin.py:
@admin.register(Astronaut)
class AstronautAdmin(admin.ModelAdmin):
    list_display = ('last_name', 'first_name', 'nationality', 'birth_date', 'age_display')
    list_filter = ('nationality',)
    search_fields = ('first_name', 'last_name', 'nationality')
    
    @admin.display(description='Возраст')
    def age_display(self, obj):
        from datetime import date
        today = date.today()
        age = today.year - obj.birth_date.year - (
            (today.month, today.day) < (obj.birth_date.month, obj.birth_date.day)
        )
        return f"{age} лет"




def mission_create_view(request):
    """Создание новой миссии"""
    if request.method == 'POST':
        form = MissionForm(request.POST)
        if form.is_valid():
            mission = form.save()
            messages.success(request, 'Миссия успешно создана!')
            return redirect('home')
    else:
        form = MissionForm()
    
    context = {
        'form': form,
        'title': 'Создание новой миссии',
    }
    return render(request, 'space_app/mission_form.html', context)


исправить
doctor = Doctor.objects.get(id=doctor_id)
на
from django.shortcuts import get_object_or_404

doctor = get_object_or_404(Doctor, id=doctor_id)






from django.db import models
from django.contrib.auth.models import User

class Review(models.Model):
    # Кто оставил отзыв
    reviewer = models.ForeignKey(
        User,
        on_delete=models.SET_NULL,
        verbose_name='Автор отзыва',
        related_name='medical_reviews',  # user.medical_reviews.all()
        null=True,
        blank=True,
        help_text='Пользователь, оставивший отзыв'
    )
    
    # На кого оставлен отзыв
    doctor = models.ForeignKey(
        'Doctor',
        on_delete=models.CASCADE,
        verbose_name='Врач',
        related_name='reviews'  # doctor.reviews.all()
    )
    
    # Дополнительное поле для анонимности
    is_anonymous = models.BooleanField(
        default=False,
        verbose_name='Анонимный отзыв'
    )
    
    # Текст отзыва
    content = models.TextField(
        verbose_name='Текст отзыва',
        max_length=2000
    )
    
    # Дата создания
    created_at = models.DateTimeField(
        auto_now_add=True,
        verbose_name='Дата создания'
    )
    
    class Meta:
        verbose_name = 'Отзыв'
        verbose_name_plural = 'Отзывы'
        ordering = ['-created_at']
    
    def __str__(self):
        if self.reviewer:
            return f"Отзыв от {self.reviewer.username} на {self.doctor}"
        else:
            return f"Анонимный отзыв на {self.doctor}"
